plugins {
    id 'java-library'
    /*用于上传maven*/
    id 'maven'
}

java {
//    sourceCompatibility = JavaVersion.VERSION_1_7
//    targetCompatibility = JavaVersion.VERSION_1_7
    sourceCompatibility JavaVersion.VERSION_1_8
    targetCompatibility JavaVersion.VERSION_1_8
}

dependencies {
    /*compiler 工具库，提供生成文件的工具类*/
    implementation("bas.lib:lib-compiler:0.0.1")
    /*注解*/
    compileOnly("bas.droid:leanback-effect-annotation:0.0.1")

//    implementation project(path: ':leanback-effect-annotation')
    /*//自动注册，动态生成 META-INF/...文件*/
    compileOnly 'com.google.auto.service:auto-service:1.0.1'
    annotationProcessor 'com.google.auto.service:auto-service:1.0.1'
}


def PROJECT_NAME = 'leanback-effect-compiler'
def PROJECT_VERSION = '0.0.1'
def PROJECT_DESC = 'leanback-effect compiler.'
def ARTIFACT_ID = 'leanback-effect-compiler'


Properties properties = new Properties()
properties.load(project.rootProject.file('local.properties').newDataInputStream())
def NEXUS_URL = properties.getProperty('NEXUS_URL')
def NEXUS_USER = properties.getProperty('NEXUS_USER')
def NEXUS_PWD = properties.getProperty('NEXUS_PWD')

uploadArchives {
    repositories {
        mavenDeployer {
            repository(url: NEXUS_URL) {
                authentication(userName: NEXUS_USER, password: NEXUS_PWD)
            }
            pom.project {
                name PROJECT_NAME
                version PROJECT_VERSION
                artifactId ARTIFACT_ID
                groupId 'bas.droid'
                packaging 'aar'
                description PROJECT_DESC
            }
        }
    }
}